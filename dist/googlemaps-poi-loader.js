var gMap=function(){function e(){return f}function t(e){$.each(u,function(t,r){n($(r).data("layerUrl"),e)})}function r(){$(u).on("click",function(){if(c)for(var e=0;e<f.length;e++){var t=!1;f[e].src===$(this).data("layerUrl")&&(t=!0,a(e))}else o();void 0!==p&&p(),t||n($(this).data("layerUrl"))})}function a(e){f[e].layerInstance.setMap(null),f.splice(e,1)}function o(){$.each(f,function(e,t){t.layerInstance.setMap(null)}),f=[]}function n(e,t){l(e,t)}function l(e,t){var r={url:e,preserveViewport:!0,map:i},a={};$.extend(!0,a,r,t);var o=new google.maps.KmlLayer(a);return f.push({layerInstance:o,src:e}),o}function s(e,t){o(),l(e,t)}var i,p,c,u={},f=[],y=function(e){if(void 0===e.map)throw new Error("Google map object must be passed as property of data parameter.");if(void 0===e.filters)throw new Error("Array of DOM elements containing data-layer-url attribute must be passed as property of data parameter.");i=e.map,u=e.filters,p=e.filterClickCallback,c=e.onLayerChangeKeepState||!1;(e.setEvents===!0||void 0===e.setEvents)&&r(),e.showOnLoad&&t(),console.log(e)};return y.prototype.loadAll=t,y.prototype.addLayer=n,y.prototype.getLayers=e,y.prototype.loadSingleLayer=s,y.prototype.setEvents=r,y.prototype.clearPreviousLayers=o,y}();