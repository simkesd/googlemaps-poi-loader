var kmlLoader=function(){function e(){return i.kmlLayers}function a(e){for(var a=0;a<i.filters.length;a++)n(i.filters[a].dataset.layerUrl,e)}function r(){for(var e=0;e<i.filters.length;e++)i.filters[e].onclick=function(e){var a=!1,r=this.dataset.layerUrl;if(i.onLayerChangeKeepState)for(var o=0;o<i.kmlLayers.length;o++)i.kmlLayers[o].src===r&&(a=!0,t(o));else l();a||n(r),void 0!==i.filterClickCallback&&(p.prototype.callbackReturnValue=i.filterClickCallback())}}function t(e){i.kmlLayers[e].layerInstance.setMap(null),i.kmlLayers.splice(e,1)}function l(){for(var e=0;e<i.kmlLayers.length;e++)i.kmlLayers[e].layerInstance.setMap(null);i.kmlLayers=[]}function n(e,a){o(e,a)}function o(e,a){var r={url:e,preserveViewport:!0,map:i.map};for(var t in a)a.hasOwnProperty(t)&&(r[t]=a[t]);var l=new google.maps.KmlLayer(r);return i.kmlLayers.push({layerInstance:l,src:e}),l}function s(e,a){l(),o(e,a)}var i={map:null,filters:{},kmlLayers:[],filterClickCallback:null,onLayerChangeKeepState:!1,showOnLoad:!1,callbackReturnValue:null},p=function(e,t,l){if(void 0===e)throw new Error("Google map object must be passed as first parameter.");if(void 0===t)throw new Error("Array of DOM elements containing data-layer-url attribute must be passed as second parameter.");i.map=e,i.filters=t,i.filterClickCallback=l.filterClickCallback,i.onLayerChangeKeepState=l.onLayerChangeKeepState||i.onLayerChangeKeepState,i.showOnLoad=l.showOnLoad||showOnLoad,l.setEvents===!0&&r(),i.showOnLoad&&a()};return p.prototype.loadAll=a,p.prototype.addLayer=n,p.prototype.getLayers=e,p.prototype.loadSingleLayer=s,p.prototype.setEvents=r,p.prototype.removeLayer=t,p.prototype.clearPreviousLayers=l,p}();